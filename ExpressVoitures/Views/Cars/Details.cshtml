@using ExpressVoitures.Controllers
@using ExpressVoitures.Models.Entities
@using ExpressVoitures.Data


@model ExpressVoitures.Models.Entities.CarViewModel
@{
    ViewData["Title"] = "Details";
}
<div class="container">
    <!-- Miniatures -->
    <div class="row">
        <div class="col-md-4">
            <div class="carousel-thumbnails">
                @if(Model.ImagePaths?.Count > 0)
                @foreach (var imagePath in Model.ImagePaths)
                {
                    <img src="@Url.Content($"~/{imagePath}")" class="img-thumbnail" alt="Car Thumbnail" onclick="changeImage(this)" />
                }
                @if (Model.ImagePaths?.Count <= 0)
                {
                <img src="~/Images/Img_Vignette_Default.jpg" class="card-img-top" alt="Car Image" style="width:100%" />
                }
            </div>
        </div>
        <!-- Image principale -->
         <div class="col-md-6">
            @if (Model.ImagePaths?.Count > 0)
            {
                var carImagePath = Model.ImagePaths.First();
                <img src="~/@carImagePath" class="card-img-top" alt="Car Image" id="mainImage" style="width:100%" />
            }
            else
            {
                <img src="~/Images/Img_Vignette_Default.jpg" class="card-img-top" alt="Car Image" id="mainImage" style="width:100%" />
            }
        </div>
    </div>>
</div>

<!-- Informations -->
    <!-- Informations -->
    <div class="row">
        <div class="col-md-12 car-info">
            <h2>@Model.CarBrand.CarBrandName - @Model.CarModel.CarModelName</h2>
            <ul class="list-unstyled">
                <li><strong>Finition :</strong> @Model.CarTrim.CarTrimName</li>
                <li><strong>Motorisation :</strong> @Model.CarMotor.CarMotorName</li>
                <li><strong>Kilométrage :</strong> @Model.Mileage km</li>
                <li><strong>Année :</strong> @Model.Year</li>
                <li><strong>Disponible le :</strong> @Model.DateOfAvailability</li>
            </ul>
            <div class="car-price-details">@string.Format(new System.Globalization.CultureInfo("fr-FR"), "{0:N0}", Model.SellingPrice) €</div>
            <p>@Model.Description</p>
        </div>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
<script>

    function changeImage(element) {
        console.log(element.src);
        var imagePath = element.src.split('\\').pop();
        console.log(imagePath);
        document.getElementById("mainImage").src =  imagePath;
    }
</script>
}
